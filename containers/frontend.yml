# traefik.yml
global:
  checkNewVersion: false
  sendAnonymousUsage: false

tls:
  options:
    default:
      sniStrict: true
  certificates:
    - certFile: /run/secrets/server.crt
      keyFile: /run/secrets/server.key

certificatesResolvers:
  letsencrypt:
    acme:
      storage: /traefik/letsencrypt.json
      tlsChallenge: {}

providers:
  docker:
    # FIXME replace hardcoded ip of podman host bridge ip with something dynamic
    endpoint: tcp://10.88.0.1:2375
    watch: true
    exposedbydefault: false
  file:
    directory: /traefik
    watch: true

entryPoints:
  http:
    address: ":80"
    http:
      redirections:
        entryPoint:
          to: https
          scheme: https
  https:
    address: ":443"

http:
  middlewares:

    ratelimit:
      rateLimit:
        average: 100
        burst: 50

